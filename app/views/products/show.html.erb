<div class="product-detail-container">
  <h1><%= @product.name %></h1>
  <h3>Por <%= @product.author %></h3>
  <p class="category">CategorÃ­a: <%= @product.category %> | Tipo: <%= @product.type %></p>

  <div class="product-images">
    <% if @product.cover_image&.file&.attached? %>
      <div class="main-image">
        <%= image_tag @product.cover_image.file, style: "max-width: 400px;" %>
      </div>
    <% end %>
    
    <% if @product.images.any? %>
      <div class="thumbnails">
        <% @product.images.each do |img| %>
          <% if img.file&.attached? %>
            <%= image_tag img.file, style: "max-width: 100px; margin: 5px;" %>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
  
  <% if @product.used_product&.audio&.file&.attached? %>
    <div class="audio-player" style="margin-top: 20px; padding: 15px; background: #f3f4f6; border-radius: 8px;">
      <p style="margin-bottom: 10px; font-weight: bold; color: #374151;">ðŸ”Š Prueba de sonido (Producto Usado):</p>
      <audio controls style="width: 100%;">
        <source src="<%= url_for(@product.used_product.audio.file) %>" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
      </audio>
    </div>
  <% end %>

  <div class="product-info">
    <p class="description"><strong>DescripciÃ³n:</strong> <%= @product.description %></p>
    <h2 class="price">Precio: $<%= @product.price %></h2>
    <p class="stock">Stock disponible: <%= @product.current_stock %></p>
  </div>

  <hr>

  <div class="related-products">
    <h3>Tal vez tambiÃ©n te interese...</h3>
    <div class="products-grid">
      <% @related_products.each do |related| %>
        <div class="product-card-mini">
          <strong><%= link_to related.name, product_path(related) %></strong>
          <br>
          <small><%= related.author %></small>
        </div>
      <% end %>
    </div>
  </div>

  <br>
  <%= link_to "Volver al catÃ¡logo", products_path %>
</div>